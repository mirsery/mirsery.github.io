<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> rabbitmq笔记 · mirsery</title><meta name="description" content="rabbitmq笔记 - mirsery"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="stylesheet" href="/css/dracula.css"><link rel="search" type="application/opensearchdescription+xml" href="https://mirsery.github.io/atom.xml" title="mirsery"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="mirsery" type="application/atom+xml">
<!-- hexo-inject:begin --><script src='https://unpkg.com/echarts@3.3.2/dist/echarts.min.js'></script><!-- hexo-inject:end --></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">mirsery</h2></a></div><a class="li component-nav-item" href="/" target="_self"><p>首页</p></a><a class="li component-nav-item" href="/archives" target="_self"><p>归档</p></a><a class="li component-nav-item" href="/categories" target="_self"><p>分类</p></a><a class="li component-nav-item" href="/tags" target="_self"><p>标签</p></a><ul class="shortcut-icons"><a href="https://github.com/mirsery" target="_blank"><img class="icon" src="/images/github.svg"></a><a href="/atom.xml" target="_blank"><img class="icon" src="/images/rss.svg"></a><a href="https://www.zhihu.com/people/mirsery" target="_blank"><img class="icon" src="/images/zhihu.svg"></a></ul></ul></nav></header><main class="container"><div id="post-container"><div class="post article post-block"><h1 class="post-title">rabbitmq笔记</h1><div class="post-info">作者: mirsery         创建日期: 2024年1月29日</div><div class="post-content"><!-- toc -->

<!-- hexo-inject:begin --><!-- hexo-inject:end --><ul>
<li><a href="#%E6%A6%82%E8%BF%B0">概述</a></li>
<li><a href="#exchange-%E7%B1%BB%E5%9E%8B">exchange 类型</a><ul>
<li><a href="#fanout">fanout</a></li>
<li><a href="#direct">direct</a></li>
<li><a href="#topic-%E4%BA%A4%E6%8D%A2%E6%9C%BA">topic 交换机</a></li>
</ul>
</li>
<li><a href="#rabbitmq%E7%9A%84%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%9E%8B">rabbitmq的架构模型</a></li>
</ul>
<!-- tocstop -->

<h2><span id="概述">概述</span></h2><p><img src="/2024/01/29/talk/2024/rabbitmq%E7%AC%94%E8%AE%B0/rabbitmq_info.png"></p>
<p>Rabbitmq一些常见的角色</p>
<ul>
<li>publisher 生产者</li>
<li>consumer 消费者</li>
<li>exchange 交换机，负责消息路由</li>
<li>queue 队列，存储信息</li>
<li>virtualHost 虚拟主机</li>
</ul>
<h2><span id="exchange-类型">exchange 类型</span></h2><p>发布订阅模式与之前案例的区别就是允许将同一消息发送给多个消费者。实现方式是加入了exchange（交换机）。</p>
<p>常见exchange类型包括：<br>Fanout：广播-将消息交给所有绑定到交换机的队列<br>Direct：定向-把消息交给符合指定routing key 的队列<br>Topic：通配符-把消息交给符合routing pattern（路由模式） 的队列</p>
<h3><span id="fanout">fanout</span></h3><p>在Fanout模式中，一条消息，会被所有订阅的队列都消费。</p>
<h3><span id="direct">direct</span></h3><p>在Direct模型下：<br>队列与交换机的绑定，不能是任意绑定了，而是要指定一个<code>RoutingKey</code>（路由key）<br>消息的发送方在 向 Exchange发送消息时，也必须指定消息的 <code>RoutingKey</code>。<br>Exchange不再把消息交给每一个绑定的队列，而是根据消息的<code>Routing Key</code>进行判断，只有队列的<code>Routingkey</code>与消息的 <code>Routing key</code>完全一致，才会接收到消息。</p>
<h3><span id="topic-交换机">topic 交换机</span></h3><p><code>Topic</code>类型的<code>Exchange</code>与<code>Direct</code>相比，都是可以根据<code>RoutingKey</code>把消息路由到不同的队列。只不过<code>Topic</code>类型<code>Exchange</code>可以让队列在绑定<code>Routing key</code> 的时候使用通配符！</p>
<p>通配符规则：</p>
<ul>
<li><code>#</code>：匹配一个或多个词 <code>item.spu.insert</code></li>
<li><code>*</code>：匹配不多不少恰好1个词 <code>item.spu</code></li>
</ul>
<h2><span id="rabbitmq的架构模型">rabbitmq的架构模型</span></h2></div></div></div></main><footer class="footer-container"><div class="paginator"><a class="prev" href="/2024/01/30/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B8%AD%E7%9A%84%E9%94%81%E4%B8%80/">上一篇</a><a class="next" href="/2024/01/18/linux/%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81/">下一篇</a></div><div class="copyright"><p>© 2015 - 2024 <a href="https://mirsery.github.io">mirsery</a> </p><p>powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and  <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a></p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"mirsery",'auto');ga('send','pageview');</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7201423389984397" crossorigin="anonymous"></script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>